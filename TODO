 # TODO

Needs:
- Add support for command/response IDs as it's not really possible to guarantee sequential order on a stream of events
  - On hybridserver proto

- Check why sending 2 messages in a row in the cli makes the hybridserver confuse
- Make {set} get a reply even in case the device doesn't change status


Majors:
- Timestamp sync at start (will help encryption and security later)
- Encryption support
- Define command retry policy - try with another connection? How many attempts?
  - Implement Tuya retry policy
- Support for sending metrics to OpenTSDB
- Work out a better logging format

Improvements:
- Notify multiple device status changes in one message when they happen at the same time
- Encryption support
	- Configurable need for encryption
- Authorization
	- Proto authorization (http=gets only, native=everything, etc...)
	- User permission settings and validation
- Move "get_status_on_start" to device.py instead of being in tuya.py


Minors:
- Evaluate whether we should destroy the hardware module or not when hardware metadata changes


Later:
- Implement "/api/device/discovery" with {new} and {lost}


Issues:
Check instability - might be related to OSX issue with ARP:
- https://github.com/davidfoliveira/homeswitch-api/issues/1 # Fix attempt to send item that is not in `waiting` state - ongoing, added logging and changed a few things to change the status of `sent` to `waiting` in case of disconnect
- https://github.com/davidfoliveira/homeswitch-api/issues/13 # Don't read infinitely